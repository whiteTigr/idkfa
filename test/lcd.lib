: LCD_BaseAddr 20000 ; INLINE

: BufferIsFull? LCD_BaseAddr INPORT ; INLINE
: InWaitingState? LCD_BaseAddr 1 + INPORT ; INLINE
: LCD_OUTPORT LCD_BaseAddr + BEGIN BufferIsFull? NOT UNTIL OUTPORT ; INLINE
: EMIT 1 LCD_OUTPORT ; INLINE
: HOME 1 3 LCD_OUTPORT ; INLINE
: CR 1 4 LCD_OUTPORT ; INLINE
: EMIT_SMTG 5 LCD_OUTPORT ; INLINE
: LCD_INIT BEGIN InWaitingState? UNTIL 1 LCD_BaseAddr 6 + OUTPORT ; INLINE
: HEXDIGIT 7 LCD_OUTPORT ; INLINE

: HEXPRINTBYTE
 DUP 4 >> HEXDIGIT
 HEXDIGIT
;

: HEXPRINTWORD
 DUP 8 >> HEXPRINTBYTE
 HEXPRINTBYTE
;

: HEXPRINT
 DUP 16 >> HEXPRINTWORD
 HEXPRINTWORD
;

: STR->LCD
 BEGIN
  DUP @ EMIT
  1 +
  DUP @ NOT IF DROP EXIT THEN
 AGAIN
;

: BYTE->LCD // num --
 0x80
 8 0 DO
  OVER OVER AND IF 49 ELSE 48 THEN EMIT
  SHR
 LOOP
 DROP DROP
;

{
  LCD_INIT
  0b1100 EMIT_SMTG // cursor off
}

